<div class="content-wrapper container-xxl p-0">
    <div class="content-body">
        <app-content-header [contentHeader]="contentHeader"></app-content-header>
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <form (ngSubmit)="loadPage(1)">
                            <div class="row">
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <input type="text" name="keyword" placeholder="Nhập từ khóa tìm kiếm"
                                            [(ngModel)]="searchForm.keyword" class="form-control" />
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <button type="submit" class="btn btn-block btn-info">
                                            Lọc kết quả <span [data-feather]="'search'"></span>
                                        </button>
                                    </div>
                                </div>
                                <div class="col-md-3" *ngIf="isExportFile">
                                    <div class="form-group">
                                        <button type="button" (click)="exportExcelReport()"
                                            class="btn btn-block btn-success">Xuất
                                            báo cáo excel <span [data-feather]="'file'"></span></button>
                                    </div>
                                </div>
                            </div>
                        </form>

                        <div class="" *blockUI="'section-block'" style="padding-top: 20px;">
                            <ngx-datatable #table class="bootstrap core-bootstrap" [summaryRow]="enableSummary"
                                [summaryPosition]="summaryPosition" [summaryHeight]="100"
                                [columnMode]="ColumnMode.force" [headerHeight]="50" rowHeight="auto" [rows]="list">

                                <ngx-datatable-column name="STT" [width]="50" [cellClass]="table-stt">
                                    <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row">
                                        {{rowIndex+1}}
                                    </ng-template>
                                </ngx-datatable-column>
                                <ngx-datatable-column name="Tên Đơn Vị" prop="name" [summaryTemplate]="nameSummaryCell"
                                    [cellClass]="d-block"></ngx-datatable-column>
                                <ngx-datatable-column name="SL Đăng Ký" prop="total_user" [summaryFunc]="sumValue">
                                    <ng-template let-row="row" ngx-datatable-cell-template>
                                        <div class="align-items-center">
                                            <div class="cell-line-height">
                                                <p class="font-medium-1 font-weight-bold line-height-1 mb-25 text-wrap">
                                                    {{ row.total_user | number }}
                                                </p>
                                            </div>
                                        </div>
                                    </ng-template></ngx-datatable-column>
                                <ngx-datatable-column name="SL Bàn Giao" prop="imported_quantility"
                                    [summaryFunc]="sumValue" [cellClass]="d-block">
                                    <ng-template let-row="row" ngx-datatable-cell-template>
                                        <div class="align-items-center">
                                            <div class="cell-line-height">
                                                <p class="font-medium-1 font-weight-bold line-height-1 mb-25 text-wrap">
                                                    {{ row.imported_quantility | number }}
                                                </p>
                                            </div>
                                        </div>
                                    </ng-template></ngx-datatable-column>
                                <ngx-datatable-column name="TB Hoạt Động" prop="sum_active" [summaryFunc]="sumValue"
                                    [cellClass]="d-block"><ng-template let-row="row" ngx-datatable-cell-template>
                                        <div class="align-items-center">
                                            <div class="cell-line-height">
                                                <p class="font-medium-1 font-weight-bold line-height-1 mb-25 text-wrap">
                                                    {{ row.sum_active | number }}
                                                </p>
                                            </div>
                                        </div>
                                    </ng-template></ngx-datatable-column>
                                <ngx-datatable-column name="Hoàn thiện TTTB" prop="sum_completed_infor_sim"
                                    [summaryFunc]="sumValue" [cellClass]="d-block"><ng-template let-row="row"
                                        ngx-datatable-cell-template>
                                        <div class="align-items-center">
                                            <div class="cell-line-height">
                                                <p class="font-medium-1 font-weight-bold line-height-1 mb-25 text-wrap">
                                                    {{ row.sum_completed_infor_sim | number }}
                                                </p>
                                            </div>
                                        </div>
                                    </ng-template></ngx-datatable-column>
                                <ngx-datatable-column name="DT Tiêu dùng" prop="sum_revenue" [summaryFunc]="sumValue"
                                    [cellClass]="d-block"><ng-template let-row="row" ngx-datatable-cell-template>
                                        <div class="align-items-center">
                                            <div class="cell-line-height">
                                                <p class="font-medium-1 font-weight-bold line-height-1 mb-25 text-wrap">
                                                    {{ row.sum_revenue | number }}
                                                </p>
                                            </div>
                                        </div>
                                    </ng-template></ngx-datatable-column>
                                <ngx-datatable-column name="DT Topup" prop="topup" [summaryFunc]="sumValue"
                                    [cellClass]="d-block"><ng-template let-row="row" ngx-datatable-cell-template>
                                        <div class="align-items-center">
                                            <div class="cell-line-height">
                                                <p class="font-medium-1 font-weight-bold line-height-1 mb-25 text-wrap">
                                                    {{ row.topup | number }}
                                                </p>
                                            </div>
                                        </div>
                                    </ng-template></ngx-datatable-column>
                            </ngx-datatable>

                            <ng-template #nameSummaryCell>
                                <div class="name-container">
                                    Tổng
                                </div>
                            </ng-template>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>